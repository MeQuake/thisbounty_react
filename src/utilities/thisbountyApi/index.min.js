const appId = '1936865129878142';
const idenitfyPoolId = 'us-east-1:8e8026e4-1d15-408d-8850-68db5dd7ad81';
AWS.config.region = 'us-east-1';

export default function login() {
  return new Promise(function(resolve, reject) {
    FB.init({
      appId: appId
    });

    FB.login(function(response) {
      var container = document.getElementById('container');
      container.style.display = "block";
      if (response.authResponse) {
        AWS.config.credentials = new AWS.CognitoIdentityCredentials({
          IdentityPoolId: idenitfyPoolId,
          Logins: {
            'graph.facebook.com': response.authResponse.accessToken
          }
        });
        resolve();
      }
      else {
        reject("Something went wrong with the login.");
      }
    });
  });
}

// Load the Facebook SDK asynchronously

(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {
    return;
  }
  js = d.createElement(s);
  js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

